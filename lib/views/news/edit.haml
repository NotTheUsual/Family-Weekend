%script{src: 'https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js'}
%script{type: 'text/javascript', src: 'http://cdnjs.cloudflare.com/ajax/libs/showdown/0.3.1/showdown.min.js'}
%script{type: 'text/javascript', src: '/javascripts/vendor/dropzone.js'}
%script{type: 'text/javascript', src: '/javascripts/postEditor.js'}

%main.admin{'ng-app' => 'postEditor', 'ng-controller' => 'PostCtrl'}(ng-init="setId(#{@post.id})")
  %header.full-width-header
    %h1 Add New Post
  %section.post-editor
    %header.post-editor-header
      %p You can either use the form below to edit the text, or just drop an updated Word doc on the right, and we'll update from there.
      .dropzone-container
        %form#post-dropzone.dropzone{action: '/news/convert', method: 'post', multipart: true, 'drop-zone' => ''}
    %section.post-editor-md-review
      %form.post-editor-review-form{action: "/news/#{@post.id}", method: 'put', multipart: true}
        %input.title-input{type: 'text', name: 'post[title]', value: @post.title}
        %textarea{name: 'post[body]', 'ng-model' => 'output'}(ng-init="output='Loading...'")= @post.body
        %input.post-submit{type: 'submit', name: 'Accept', value: 'Submit', 'ng-show' => '!!output'}
      %article.post-editor-preview{'ng-bind-html' => 'output | markdown'}

